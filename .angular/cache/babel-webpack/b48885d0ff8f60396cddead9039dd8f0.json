{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../services/album.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/material/button\";\nimport * as i4 from \"@angular/flex-layout\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\n\nfunction AlbumPhotosComponent_app_photo_item_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-photo-item\", 6);\n  }\n\n  if (rf & 2) {\n    const photoEl_r1 = ctx.$implicit;\n    i0.ɵɵproperty(\"photo\", photoEl_r1);\n  }\n}\n\nexport let AlbumPhotosComponent = /*#__PURE__*/(() => {\n  class AlbumPhotosComponent {\n    constructor(albumService, router, route) {\n      this.albumService = albumService;\n      this.router = router;\n      this.route = route;\n    }\n\n    ngOnInit() {\n      this.route.params.subscribe(params => {\n        if (+params['id'] && !this.isEditMode()) {\n          this.albumService.getAlbum(+params['id']).subscribe(album => {\n            this.album = album;\n          });\n        }\n      });\n    }\n\n    onFileChange(event) {\n      if (event.target.files && event.target.files[0]) {\n        let filesAmount = event.target.files.length;\n\n        for (let i = 0; i < filesAmount; i++) {\n          let reader = new FileReader();\n          let photo = {\n            type: event.target.files[i].type.split('/')[1],\n            imageFile: event.target.files[i]\n          };\n\n          reader.onload = event => {\n            console.log(event.target.result);\n            photo.imageValue = event.target.result;\n            this.album.photos.push(photo);\n          };\n\n          reader.readAsDataURL(event.target.files[i]);\n        }\n      }\n    }\n\n    onAddPhotos() {\n      document.getElementById(\"file\").click();\n    }\n\n    onEditAlbum() {\n      this.router.navigate(['edit'], {\n        relativeTo: this.route\n      });\n    }\n\n    hiddeAddButton() {\n      return this.route.snapshot.url.length !== 1 && this.route.snapshot.url.length !== 3;\n    }\n\n    isEditMode() {\n      return this.route.snapshot.url[this.route.snapshot.url.length - 1].path === 'edit';\n    }\n\n  }\n\n  AlbumPhotosComponent.ɵfac = function AlbumPhotosComponent_Factory(t) {\n    return new (t || AlbumPhotosComponent)(i0.ɵɵdirectiveInject(i1.AlbumService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i2.ActivatedRoute));\n  };\n\n  AlbumPhotosComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AlbumPhotosComponent,\n    selectors: [[\"app-album-photos\"]],\n    inputs: {\n      album: \"album\"\n    },\n    decls: 9,\n    vars: 3,\n    consts: [[2, \"background-color\", \"white\", \"margin-top\", \"1%\"], [\"type\", \"button\", \"mat-raised-button\", \"\", 2, \"background-color\", \"rgb(14,70,200)\", \"margin\", \"1%\", 3, \"hidden\", \"click\"], [\"fxLayout\", \"row wrap\", \"fxLayoutGap\", \"1%\", 1, \"scroll\"], [\"fxFlex\", \"23%\", \"fxFlexFill\", \"\", 3, \"photo\", 4, \"ngFor\", \"ngForOf\"], [2, \"display\", \"none\"], [\"id\", \"file\", \"type\", \"file\", \"multiple\", \"\", \"accept\", \"image/*\", 1, \"form-control\", 3, \"change\"], [\"fxFlex\", \"23%\", \"fxFlexFill\", \"\", 3, \"photo\"]],\n    template: function AlbumPhotosComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"button\", 1);\n        i0.ɵɵlistener(\"click\", function AlbumPhotosComponent_Template_button_click_1_listener() {\n          return ctx.onAddPhotos();\n        });\n        i0.ɵɵtext(2, \"Add Photos\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"button\", 1);\n        i0.ɵɵlistener(\"click\", function AlbumPhotosComponent_Template_button_click_3_listener() {\n          return ctx.onEditAlbum();\n        });\n        i0.ɵɵtext(4, \"Edit Album\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\", 2);\n        i0.ɵɵtemplate(6, AlbumPhotosComponent_app_photo_item_6_Template, 1, 1, \"app-photo-item\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"form\", 4);\n        i0.ɵɵelementStart(8, \"input\", 5);\n        i0.ɵɵlistener(\"change\", function AlbumPhotosComponent_Template_input_change_8_listener($event) {\n          return ctx.onFileChange($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"hidden\", ctx.hiddeAddButton());\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"hidden\", !ctx.hiddeAddButton());\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.album.photos);\n      }\n    },\n    directives: [i3.MatButton, i4.DefaultLayoutDirective, i4.DefaultLayoutGapDirective, i5.NgForOf, i6.ɵNgNoValidate, i6.NgControlStatusGroup, i6.NgForm, i4.DefaultFlexDirective, i4.FlexFillDirective],\n    styles: [\"div.scroll[_ngcontent-%COMP%]{min-height:425px;max-height:575px;overflow-x:hidden;overflow-y:auto;text-align:center}\"]\n  });\n  return AlbumPhotosComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}